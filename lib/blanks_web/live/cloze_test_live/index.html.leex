<%= if @live_action in [:new, :edit] do %>
  <%= live_modal @socket, BlanksWeb.ClozeTestLive.FormComponent,
    id: @cloze_test.id || :new,
    user_id: @user_id,
    title: @page_title,
    action: @live_action,
    cloze_test: @cloze_test,
    return_to: Routes.cloze_test_index_path(@socket, :index) %>
<% end %>

<div class="max-w-3xl">

  <div class="flex content-between">
    <div class="mb-8 w-2/3">Here is the list of cloze tests you have created.</div>
    <div class="w-1/3 text-right">
      <%= live_patch "New Cloze test", to: Routes.cloze_test_edit_path(@socket, :new), class: "px-3 py-2 rounded text-sm font-medium text-white bg-gray-700 hover:bg-gray-900 focus:outline-none focus:text-white focus:bg-gray-800" %>
    </div>
  </div>

  <%= for cloze_test <- @cloze_tests do %>

    <div id="cloze_test-<%= cloze_test.id %>" class="bg-gray-200 rounded p-4 mb-4">

      <%= live_redirect cloze_test.name, to: Routes.cloze_test_edit_path(@socket, :edit, cloze_test), class: "text-xl font-medium pb-2 hover:text-gray-700" %>

      <div class="flex content-between">

        <div class="w-2/3 py-2">
          <p><%= cloze_test.content %></p>
        </div>

        <div class="w-1/3 p-2 text-right">
          <%# live_patch "Edit", to: Routes.cloze_test_index_path(@socket, :edit, cloze_test), class: "hover:text-blue-700" %>
          <%= link "Delete", to: "#", phx_click: "delete", phx_value_id: cloze_test.id, data: [confirm: "Are you sure?"], class: "text-red-700 hover:text-red-600" %>
        </div>

      </div>

    </div>

  <% end %>

</div>
